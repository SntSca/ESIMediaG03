<div class="password-field">
  <input class="input"
    [type]="showPwd ? 'text' : 'password'"
    name="pwd"
    [(ngModel)]="pwd"
    required
    minlength="8"
    #pwdModel="ngModel"
    (ngModelChange)="onPwdChange()"
    [ngClass]="{
      'input-error': (pwdModel.invalid && pwdModel.dirty) || (pwdModel.dirty && pwdIssues.length>0),
      'input-valid': pwdModel.valid && pwdIssues.length==0
    }"
    placeholder="ContraseÃ±a *">
  <button type="button" class="toggle-eye" (click)="togglePwd()">{{ showPwd ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}</button>
</div>

<ul class="error-list" *ngIf="pwdModel.dirty && pwdIssues.length">
  <li *ngFor="let r of pwdIssues" class="error-msg">â€¢ {{ r }}</li>
</ul>

<!-- ğŸ”¹ ComprobaciÃ³n de contraseÃ±a comprometida -->
<div class="pwned-info" *ngIf="pwdModel.dirty && pwd.length >= 8">
  <span *ngIf="isCheckingPwned">ğŸ” Comprobando si la contraseÃ±a estÃ¡ comprometida...</span>
  <span *ngIf="pwnedCount !== null && pwnedCount > 0" class="error-msg">
    âš ï¸ Esta contraseÃ±a aparece en {{ pwnedCount }} filtraciones pÃºblicas.
  </span>
  <span *ngIf="pwnedCount !== null && pwnedCount === 0 && !isCheckingPwned" class="success-msg">
    âœ… Esta contraseÃ±a no aparece en filtraciones conocidas.
  </span>
</div>
